package com.softcamp.SCWebconsole.restApi.management;

import org.apache.commons.codec.binary.Base64;
import org.junit.Before;
import org.junit.FixMethodOrder;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.MethodSorters;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.json.JacksonJsonParser;
import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.http.HttpHeaders;
import org.springframework.http.MediaType;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.MvcResult;

import java.nio.charset.StandardCharsets;

import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post;
import static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.jsonPath;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;

@FixMethodOrder(MethodSorters.NAME_ASCENDING)
@RunWith(SpringRunner.class)
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.MOCK)
@AutoConfigureMockMvc
public class PrintMarkingImageTest {
    @Autowired
    MockMvc mockMvc;
    String expectByResult = "$.[?(@.result == '%s')]";
    String token;

    String securityDomain = "SECURITYDOMAIN";
    String managerId = "document";
    String securityDomainEncoded = Base64.encodeBase64String(securityDomain.getBytes(StandardCharsets.UTF_8));
    String managerIdEncoded = Base64.encodeBase64String(managerId.getBytes(StandardCharsets.UTF_8));

    @Before //token 발급
    public void setUp() throws Exception {
        String jsonParam = "{\"managerId\": \"document\", \"managerPw\" : \"c2VjdXJpdHk\" }";
        MvcResult mvcResult = mockMvc.perform(post("/token").contentType(MediaType.APPLICATION_JSON).content(jsonParam))
                .andExpect(status().isCreated())
                .andExpect(jsonPath("$.token").exists())
                .andExpect(jsonPath("$.authorityName").exists())
                .andDo(print())
                .andReturn();

        String resultString = mvcResult.getResponse().getContentAsString();
        JacksonJsonParser jsonParser = new JacksonJsonParser();
        token = jsonParser.parseMap(resultString).get("token").toString();
    }

    @Test
    public void getPrintMarkingImage() throws Exception {

        String expectByDutyName = "$.[?(@.imageName == '%s')]";

        mockMvc.perform(get("/management/print-marking-image").header(HttpHeaders.AUTHORIZATION, "Bearer " + token))
                .andExpect(status().isOk())
                .andExpect(jsonPath(expectByDutyName, "softcamp").exists())
                .andDo(print());
    }

    @Test
    public void insertPrintMarkingImage() throws Exception {
        String imageName = "테스트터4";
        String imageDetail = "이미지 상세 설명4";
        String imageId = "0004";
        String markingImage ="Qk3OJAAAAAAAAD4AAAAoAAAABAEAAAQBAAABAAEAAAAAAJAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///////////////////////////////////////////AAAAD///////////////////////////////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf///*A////////////////////////////////////7AAAADf///4AP///////////////////////////////////7AAAADf///wAH///////////////////////////////////7AAAADf///4AD///////////////////////////////////7AAAADf///8AB///////////////////////////////////7AAAADf///*AA///////////////////////////////////7AAAADf///*AAf//////////////////////////////////7AAAADf////PAP//////////////////////////////////7AAAADf//4D/gP//////////////////////////////////7AAAADf//wAfwH//////////////////////////////////7AAAADf//gAHwH//////////////////////////////////7AAAADf//AADwH//////////////////////////////////7AAAADf//AADwH//////////////////////////////////7AAAADf//AAAAH//////////////////////////////////7AAAADf//AAAAH//////////////////////////////////7AAAADf//AAAAH//////////////////////////////////7AAAADf//AQAAP//////////////////////////////////7AAAADf//AfAAf//////////////////////////////////7AAAADf//gPAA///////////////////////////////////7AAAADf//wAMB///////////////////////////////////7AAAADf//wAP////////////////////////////////////7AAAADf//4AH////////////////////////////////////7AAAADf//8AD////////////////////////////////////7AAAADf//*AB////////////////////////////////////7AAAADf///AB////////////////////////////////////7AAAADf///wH///A////////////////////////////////7AAAADf///////8AP///////////////////////////////7AAAADf///////wAD///////////////////////////////7AAAADf///////gAB///////////////////////////////7AAAADf//////*AAA///////////////////////////////7AAAADf//////*AAAf//////////////////////////////7AAAADf//////8AAAP//////////////////////////////7AAAADf//////4AAAH//////////////////////////////7AAAADf//////4APgH//////////////////////////////7AAAADf//////wAfwD//////////////////////////////7AAAADf//////wA/4D//////////////////////////////7AAAADf//////wB/4B//////////////////////////////7AAAADf//////wD/4B//////////////////////////////7AAAADf//////gD/4B//////////////////////////////7AAAADf//////wH/wB//////////////////////////////7AAAADf//////wH/wB//////////////////////////////7AAAADf//////wH/gD//////////////////////////////7AAAADf//////wD/AD//////////////////////////////7AAAADf//////wB8AD//////////////////////////////7AAAADf//////4A4AH//////////////////////////////7AAAADf//////4AAAP//////////////////////////////7AAAADf//////8AAAf//////////////////////////////7AAAADf//////*AAAf//////////////////////////////7AAAADf///////AAA///////////////////////////////7AAAADf///////gAB//*P///////////////////////////7AAAADf///////wAD//8H///////////////////////////7AAAADf///////*Af//4D///////////////////////////7AAAADf////////////wB///////////////////////////7AAAADf////////////gA///////////////////////////7AAAADf////////////AA///////////////////////////7AAAADf///////////*AB///////////////////////////7AAAADf///////////8AD///////////////////////////7AAAADf///////////4AH///////////////////////////7AAAADf///////////wAP///////////////////////////7AAAADf///////////gAf///////////////////////////7AAAADf///////////AA////////////////////////////7AAAADf//////////*AA////////////////////////////7AAAADf//////////8AAf///////////////////////////7AAAADf//////////4AAP///////////////////////////7AAAADf//////////4AAP///////////////////////////7AAAADf//////////wAAH///////////////////////////7AAAADf//////////gAAD///////////////////////////7AAAADf//////////gAwB///////////////////////////7AAAADf//////////wB4A///////////////////////////7AAAADf//////////4B8B///////////////////////////7AAAADf//////////8A*D///////////////////////////7AAAADf//////////*AfH///////////////////////////7AAAADf///////////APv///////////////////////////7AAAADf///////////gH////////////////////////////7AAAADf///////////wD////////////////////////////7AAAADf///////////4B////////////////////////////7AAAADf///////////8A////////////////////////////7AAAADf///////////*A////x///////////////////////7AAAADf////////////B////g///////////////////////7AAAADf////////////j////Af//////////////////////7AAAADf////////////3///*AP//////////////////////7AAAADf////////////////4AH//////////////////////7AAAADf////////////////4AP//////////////////////7AAAADf//////////////z/gAf//////////////////////7AAAADf//////////////h/AA///////////////////////7AAAADf//////////////A*AB///////////////////////7AAAADf/////////////*AcAD///////////////////////7AAAADf/////////////8AIAH///////////////////////7AAAADf/////////////*AAAP///////////////////////7AAAADf//////////////AAAf///////////////////////7AAAADf//////////////gAA////////////////////////7AAAADf//////////////wAB////////////////////////7AAAADf//////////////4AD////////////////////////7AAAADf//////////////8AH////////////////////////7AAAADf//////////////*AH////////////////////////7AAAADf///////////////AD////////////////////////7AAAADf///////////////gB////////////////////////7AAAADf///////////////wA////////////////////////7AAAADf///////////////4Af///////////////////////7AAAADf///////////////8AP//8f///////////////////7AAAADf///////////////*Af//AD///////////////////7AAAADf////////////////A//*AA///////////////////7AAAADf////////////////h//8AAf//////////////////7AAAADf////////////////z//wAAP//////////////////7AAAADf///////////////////gAAH//////////////////7AAAADf///////////////////AAAD//////////////////7AAAADf///////////////////AAAB//////////////////7AAAADf//////////////////*AB4B//////////////////7AAAADf//////////////////8AH8A//////////////////7AAAADf//////////////////8AP*A//////////////////7AAAADf//////////////////8Af*A//////////////////7AAAADf//////////////////8A/*A//////////////////7AAAADf//////////////////8A/*A//////////////////7AAAADf//////////////////8B/8A//////////////////7AAAADf//////////////////8B/8A//////////////////7AAAADf//////////////////8B/8A//////////////////7AAAADf//////////////////8B/*A//////////////////7AAAADf//////////////////8A//B//////////////////7AAAADf//////////////////8A//5//////////////////7AAAADf//////////////////*AM////////////////////7AAAADf//////////////////*AAf//8////////////////7AAAADf///////////////////AAP//4f///////////////7AAAADf///////////////////gAP//4P///////////////7AAAADf///////////////////wAH//wH///////////////7AAAADf///////////////////4AD//wD///////////////7AAAADf///////////////////*AH//gD///////////////7AAAADf////////////////////gf//gD///////////////7AAAADf////////////////////////gH///////////////7AAAADf////////////////////////AH///////////////7AAAADf////////////////////////AH///////////////7AAAADf///////////////////////*AD///////////////7AAAADf///////////////////////*AB///////////////7AAAADf///////////////////////8AA///////////////7AAAADf///////////////////////8AAcf/////////////7AAAADf///////////////////////4AAAP/////////////7AAAADf///////////////////////4BAAH/////////////7AAAADf///////////////////////wDgAD/////////////7AAAADf///////////////////////wDwAB/////////////7AAAADf///////////////////////gHAAB/////////////7AAAADf///////////////////////gCAAD/////////////7AAAADf///////////////////////gAAAP/////////////7AAAADf///////////////////////AAAA//////////////7AAAADf//////////////////////*AAAD//////////////7AAAADf//////////////////////*AAAP//////////////7AAAADf///////////////////////AAA///////////////7AAAADf///////////////////////gAH///////////////7AAAADf///////////////////////wAf//*H///////////7AAAADf///////////////////////8H///8D///////////7AAAADf///////////////////////*f///4B///////////7AAAADf////////////////////////////wB///////////7AAAADf////////////////////////////gB///////////7AAAADf////////////////////////////AD///////////7AAAADf///////////////////////////*AH///////////7AAAADf///////////////////////////8APD//////////7AAAADf///////////////////////////4AeB//////////7AAAADf///////////////////////////wA4A//////////7AAAADf///////////////////////////gBgA//////////7AAAADf///////////////////////////ACAA//////////7AAAADf//////////////////////////*AEAA//////////7AAAADf//////////////////////////8AAAB//////////7AAAADf//////////////////////////4AAAB5/////////7AAAADf//////////////////////////wAAADw/////////7AAAADf//////////////////////////gAAADgf////////7AAAADf//////////////////////////wAAAGAP////////7AAAADf//////////////////////////4ABgOAP////////7AAAADf//////////////////////////8ADgMAP////////7AAAADf//////////////////////////8ADgMAP////////7AAAADf//////////////////////////*APAYAf////////7AAAADf///////////////////////////AfAwA/////////7AAAADf///////////////////////////h*AgB/////////7AAAADf///////////////////////////z8AAD/////////7AAAADf////////////////////////////8AAH/////////7AAAADf////////////////////////////4AAP/////////7AAAADf////////////////////////////4AAf/9///////7AAAADf////////////////////////////wAA//4///////7AAAADf////////////////////////////gAB//wf//////7AAAADf////////////////////////////wAD//gP//////7AAAADf////////////////////////////4AH//AH//////7AAAADf////////////////////////////8AP/*AD//////7AAAADf////////////////////////////*Af/8AD//////7AAAADf/////////////////////////////A//4AH//////7AAAADf/////////////////////////////h//wAP//////7AAAADf/////////////////////////////z//gAf//////7AAAADf////////////////////////////////AA///////7AAAADf///////////////////////////////*AB///////7AAAADf///////////////////////////////8AD///////7AAAADf///////////////////////////////4AB///////7AAAADf///////////////////////////////wAA///////7AAAADf///////////////////////////////gAAf//////7AAAADf///////////////////////////////AAAP//////7AAAADf//////////////////////////////*ABAH//////7AAAADf//////////////////////////////*ADgH//////7AAAADf///////////////////////////////AHwH//////7AAAADf///////////////////////////////gHwD//////7AAAADf///////////////////////////////wDwD//////7AAAADf///////////////////////////////4AgD//////7AAAADf///////////////////////////////8AAD//////7AAAADf///////////////////////////////*AAH//////7AAAADf////////////////////////////////AAH//////7AAAADf////////////////////////////////gAP//////7AAAADf////////////////////////////////wAP//////7AAAADf////////////////////////////////4A///////7AAAADf////////////////////////////////8B///////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////5///////7AAAADf/////////////////////////////////w///////7AAAADf/////////////////////////////////gf//////7AAAADf////////////////////////////////*AH//////7AAAADf////////////////////////////////8AD//////7AAAADf////////////////////////////////4AB//////7AAAADf////////////////////////////////wAA//////7AAAADf////////////////////////////////gAAf/////7AAAADf////////////////////////////////AAAP/////7AAAADf///////////////////////////////*AEAH/////7AAAADf///////////////////////////////*AEAH/////7AAAADf///////////////////////////////8APAD/////7AAAADf///////////////////////////////4AfgB/////7AAAADf///////////////////////////////wA/wA/////7AAAADf///////////////////////////////wA/wA/////7AAAADf///////////////////////////////4AfgB/////7AAAADf///////////////////////////////8APAD/////7AAAADf///////////////////////////////*AGAH/////7AAAADf////////////////////////////////AAAP/////7AAAADf////////////////////////////////gAAf/////7AAAADf////////////////////////////////wAA//////7AAAADf////////////////////////////////4AB//////7AAAADf////////////////////////////////8AD//////7AAAADf////////////////////////////////*AH//////7AAAADf/////////////////////////////////AP//////7AAAADf/////////////////////////////////gf//////7AAAADf/////////////////////////////////w///////7AAAADf/////////////////////////////////5///////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAD///////////////////////////////////////////AAAAD/";
        String url = String.format("/management/print-marking-image");
        String jsonCustomPolicy = "{ \"imageName\": \""+ imageName + "\"," +
                "\"imageDetail\" : \"" + imageDetail + "\"," +
                "\"markingImage\" : \"" + markingImage + "\"," +
                "\"imageId\" : \"" + imageId + "\"}";

        mockMvc.perform(post(url).header(HttpHeaders.AUTHORIZATION, "Bearer " + token)
                        .contentType(MediaType.APPLICATION_JSON).content(jsonCustomPolicy))
                .andExpect(status().isOk())
                .andExpect(jsonPath(expectByResult, 1).exists())
                .andDo(print());
    }

    @Test
    public void updatePrintMarkingImage() throws Exception {
        String imageName = "테스트터4";
        String imageDetail = "이미지 상세 설명4(수정)";
        String imageId = "0004";
        String markingImage ="Qk3OJAAAAAAAAD4AAAAoAAAABAEAAAQBAAABAAEAAAAAAJAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///wD///////////////////////////////////////////AAAAD///////////////////////////////////////////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf///*A////////////////////////////////////7AAAADf///4AP///////////////////////////////////7AAAADf///wAH///////////////////////////////////7AAAADf///4AD///////////////////////////////////7AAAADf///8AB///////////////////////////////////7AAAADf///*AA///////////////////////////////////7AAAADf///*AAf//////////////////////////////////7AAAADf////PAP//////////////////////////////////7AAAADf//4D/gP//////////////////////////////////7AAAADf//wAfwH//////////////////////////////////7AAAADf//gAHwH//////////////////////////////////7AAAADf//AADwH//////////////////////////////////7AAAADf//AADwH//////////////////////////////////7AAAADf//AAAAH//////////////////////////////////7AAAADf//AAAAH//////////////////////////////////7AAAADf//AAAAH//////////////////////////////////7AAAADf//AQAAP//////////////////////////////////7AAAADf//AfAAf//////////////////////////////////7AAAADf//gPAA///////////////////////////////////7AAAADf//wAMB///////////////////////////////////7AAAADf//wAP////////////////////////////////////7AAAADf//4AH////////////////////////////////////7AAAADf//8AD////////////////////////////////////7AAAADf//*AB////////////////////////////////////7AAAADf///AB////////////////////////////////////7AAAADf///wH///A////////////////////////////////7AAAADf///////8AP///////////////////////////////7AAAADf///////wAD///////////////////////////////7AAAADf///////gAB///////////////////////////////7AAAADf//////*AAA///////////////////////////////7AAAADf//////*AAAf//////////////////////////////7AAAADf//////8AAAP//////////////////////////////7AAAADf//////4AAAH//////////////////////////////7AAAADf//////4APgH//////////////////////////////7AAAADf//////wAfwD//////////////////////////////7AAAADf//////wA/4D//////////////////////////////7AAAADf//////wB/4B//////////////////////////////7AAAADf//////wD/4B//////////////////////////////7AAAADf//////gD/4B//////////////////////////////7AAAADf//////wH/wB//////////////////////////////7AAAADf//////wH/wB//////////////////////////////7AAAADf//////wH/gD//////////////////////////////7AAAADf//////wD/AD//////////////////////////////7AAAADf//////wB8AD//////////////////////////////7AAAADf//////4A4AH//////////////////////////////7AAAADf//////4AAAP//////////////////////////////7AAAADf//////8AAAf//////////////////////////////7AAAADf//////*AAAf//////////////////////////////7AAAADf///////AAA///////////////////////////////7AAAADf///////gAB//*P///////////////////////////7AAAADf///////wAD//8H///////////////////////////7AAAADf///////*Af//4D///////////////////////////7AAAADf////////////wB///////////////////////////7AAAADf////////////gA///////////////////////////7AAAADf////////////AA///////////////////////////7AAAADf///////////*AB///////////////////////////7AAAADf///////////8AD///////////////////////////7AAAADf///////////4AH///////////////////////////7AAAADf///////////wAP///////////////////////////7AAAADf///////////gAf///////////////////////////7AAAADf///////////AA////////////////////////////7AAAADf//////////*AA////////////////////////////7AAAADf//////////8AAf///////////////////////////7AAAADf//////////4AAP///////////////////////////7AAAADf//////////4AAP///////////////////////////7AAAADf//////////wAAH///////////////////////////7AAAADf//////////gAAD///////////////////////////7AAAADf//////////gAwB///////////////////////////7AAAADf//////////wB4A///////////////////////////7AAAADf//////////4B8B///////////////////////////7AAAADf//////////8A*D///////////////////////////7AAAADf//////////*AfH///////////////////////////7AAAADf///////////APv///////////////////////////7AAAADf///////////gH////////////////////////////7AAAADf///////////wD////////////////////////////7AAAADf///////////4B////////////////////////////7AAAADf///////////8A////////////////////////////7AAAADf///////////*A////x///////////////////////7AAAADf////////////B////g///////////////////////7AAAADf////////////j////Af//////////////////////7AAAADf////////////3///*AP//////////////////////7AAAADf////////////////4AH//////////////////////7AAAADf////////////////4AP//////////////////////7AAAADf//////////////z/gAf//////////////////////7AAAADf//////////////h/AA///////////////////////7AAAADf//////////////A*AB///////////////////////7AAAADf/////////////*AcAD///////////////////////7AAAADf/////////////8AIAH///////////////////////7AAAADf/////////////*AAAP///////////////////////7AAAADf//////////////AAAf///////////////////////7AAAADf//////////////gAA////////////////////////7AAAADf//////////////wAB////////////////////////7AAAADf//////////////4AD////////////////////////7AAAADf//////////////8AH////////////////////////7AAAADf//////////////*AH////////////////////////7AAAADf///////////////AD////////////////////////7AAAADf///////////////gB////////////////////////7AAAADf///////////////wA////////////////////////7AAAADf///////////////4Af///////////////////////7AAAADf///////////////8AP//8f///////////////////7AAAADf///////////////*Af//AD///////////////////7AAAADf////////////////A//*AA///////////////////7AAAADf////////////////h//8AAf//////////////////7AAAADf////////////////z//wAAP//////////////////7AAAADf///////////////////gAAH//////////////////7AAAADf///////////////////AAAD//////////////////7AAAADf///////////////////AAAB//////////////////7AAAADf//////////////////*AB4B//////////////////7AAAADf//////////////////8AH8A//////////////////7AAAADf//////////////////8AP*A//////////////////7AAAADf//////////////////8Af*A//////////////////7AAAADf//////////////////8A/*A//////////////////7AAAADf//////////////////8A/*A//////////////////7AAAADf//////////////////8B/8A//////////////////7AAAADf//////////////////8B/8A//////////////////7AAAADf//////////////////8B/8A//////////////////7AAAADf//////////////////8B/*A//////////////////7AAAADf//////////////////8A//B//////////////////7AAAADf//////////////////8A//5//////////////////7AAAADf//////////////////*AM////////////////////7AAAADf//////////////////*AAf//8////////////////7AAAADf///////////////////AAP//4f///////////////7AAAADf///////////////////gAP//4P///////////////7AAAADf///////////////////wAH//wH///////////////7AAAADf///////////////////4AD//wD///////////////7AAAADf///////////////////*AH//gD///////////////7AAAADf////////////////////gf//gD///////////////7AAAADf////////////////////////gH///////////////7AAAADf////////////////////////AH///////////////7AAAADf////////////////////////AH///////////////7AAAADf///////////////////////*AD///////////////7AAAADf///////////////////////*AB///////////////7AAAADf///////////////////////8AA///////////////7AAAADf///////////////////////8AAcf/////////////7AAAADf///////////////////////4AAAP/////////////7AAAADf///////////////////////4BAAH/////////////7AAAADf///////////////////////wDgAD/////////////7AAAADf///////////////////////wDwAB/////////////7AAAADf///////////////////////gHAAB/////////////7AAAADf///////////////////////gCAAD/////////////7AAAADf///////////////////////gAAAP/////////////7AAAADf///////////////////////AAAA//////////////7AAAADf//////////////////////*AAAD//////////////7AAAADf//////////////////////*AAAP//////////////7AAAADf///////////////////////AAA///////////////7AAAADf///////////////////////gAH///////////////7AAAADf///////////////////////wAf//*H///////////7AAAADf///////////////////////8H///8D///////////7AAAADf///////////////////////*f///4B///////////7AAAADf////////////////////////////wB///////////7AAAADf////////////////////////////gB///////////7AAAADf////////////////////////////AD///////////7AAAADf///////////////////////////*AH///////////7AAAADf///////////////////////////8APD//////////7AAAADf///////////////////////////4AeB//////////7AAAADf///////////////////////////wA4A//////////7AAAADf///////////////////////////gBgA//////////7AAAADf///////////////////////////ACAA//////////7AAAADf//////////////////////////*AEAA//////////7AAAADf//////////////////////////8AAAB//////////7AAAADf//////////////////////////4AAAB5/////////7AAAADf//////////////////////////wAAADw/////////7AAAADf//////////////////////////gAAADgf////////7AAAADf//////////////////////////wAAAGAP////////7AAAADf//////////////////////////4ABgOAP////////7AAAADf//////////////////////////8ADgMAP////////7AAAADf//////////////////////////8ADgMAP////////7AAAADf//////////////////////////*APAYAf////////7AAAADf///////////////////////////AfAwA/////////7AAAADf///////////////////////////h*AgB/////////7AAAADf///////////////////////////z8AAD/////////7AAAADf////////////////////////////8AAH/////////7AAAADf////////////////////////////4AAP/////////7AAAADf////////////////////////////4AAf/9///////7AAAADf////////////////////////////wAA//4///////7AAAADf////////////////////////////gAB//wf//////7AAAADf////////////////////////////wAD//gP//////7AAAADf////////////////////////////4AH//AH//////7AAAADf////////////////////////////8AP/*AD//////7AAAADf////////////////////////////*Af/8AD//////7AAAADf/////////////////////////////A//4AH//////7AAAADf/////////////////////////////h//wAP//////7AAAADf/////////////////////////////z//gAf//////7AAAADf////////////////////////////////AA///////7AAAADf///////////////////////////////*AB///////7AAAADf///////////////////////////////8AD///////7AAAADf///////////////////////////////4AB///////7AAAADf///////////////////////////////wAA///////7AAAADf///////////////////////////////gAAf//////7AAAADf///////////////////////////////AAAP//////7AAAADf//////////////////////////////*ABAH//////7AAAADf//////////////////////////////*ADgH//////7AAAADf///////////////////////////////AHwH//////7AAAADf///////////////////////////////gHwD//////7AAAADf///////////////////////////////wDwD//////7AAAADf///////////////////////////////4AgD//////7AAAADf///////////////////////////////8AAD//////7AAAADf///////////////////////////////*AAH//////7AAAADf////////////////////////////////AAH//////7AAAADf////////////////////////////////gAP//////7AAAADf////////////////////////////////wAP//////7AAAADf////////////////////////////////4A///////7AAAADf////////////////////////////////8B///////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////5///////7AAAADf/////////////////////////////////w///////7AAAADf/////////////////////////////////gf//////7AAAADf////////////////////////////////*AH//////7AAAADf////////////////////////////////8AD//////7AAAADf////////////////////////////////4AB//////7AAAADf////////////////////////////////wAA//////7AAAADf////////////////////////////////gAAf/////7AAAADf////////////////////////////////AAAP/////7AAAADf///////////////////////////////*AEAH/////7AAAADf///////////////////////////////*AEAH/////7AAAADf///////////////////////////////8APAD/////7AAAADf///////////////////////////////4AfgB/////7AAAADf///////////////////////////////wA/wA/////7AAAADf///////////////////////////////wA/wA/////7AAAADf///////////////////////////////4AfgB/////7AAAADf///////////////////////////////8APAD/////7AAAADf///////////////////////////////*AGAH/////7AAAADf////////////////////////////////AAAP/////7AAAADf////////////////////////////////gAAf/////7AAAADf////////////////////////////////wAA//////7AAAADf////////////////////////////////4AB//////7AAAADf////////////////////////////////8AD//////7AAAADf////////////////////////////////*AH//////7AAAADf/////////////////////////////////AP//////7AAAADf/////////////////////////////////gf//////7AAAADf/////////////////////////////////w///////7AAAADf/////////////////////////////////5///////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAADf/////////////////////////////////////////7AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAD///////////////////////////////////////////AAAAD/";
        String url = String.format("/management/print-marking-image/%s", imageId);
        String jsonCustomPolicy = "{ \"imageName\": \""+ imageName + "\"," +
                "\"imageDetail\" : \"" + imageDetail + "\"," +
                "\"markingImage\" : \"" + markingImage + "\"," +
                "\"imageId\" : \"" + imageId + "\"}";

        mockMvc.perform(post(url).header(HttpHeaders.AUTHORIZATION, "Bearer " + token)
                        .contentType(MediaType.APPLICATION_JSON).content(jsonCustomPolicy))
                .andExpect(status().isOk())
                .andExpect(jsonPath(expectByResult, 1).exists())
                .andDo(print());
    }

    @Test
    public void deletePrintMarkingImage() throws Exception {
        String imageId = "0004";
        String url = String.format("/management/print-marking-image/delete/%s", imageId);

        mockMvc.perform(post(url).header(HttpHeaders.AUTHORIZATION, "Bearer " + token))
                .andExpect(status().isOk())
                .andExpect(jsonPath(expectByResult, 1).exists())
                .andDo(print());
    }


}
